---
title: Wallet Call API
---

WalletConnect supports [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792#atomicbatch-capability), which defines new JSON-RPC methods that enable apps to ask a wallet to process a batch of onchain write calls and to check on the status of those calls.
Applications can specify that these onchain calls be executed taking advantage of specific capabilities previously expressed by the wallet; an additional, a novel wallet RPC is defined to enable apps to query the wallet for those capabilities.

- `wallet_sendCalls`: Requests that a wallet submits a batch of calls.
- `wallet_getCallsStatus`: Returns the status of a call batch that was sent via wallet_sendCalls.
- `wallet_showCallsStatus`: Requests that a wallet shows information about a given call bundle that was sent with wallet_sendCalls.
- `wallet_getCapabilities`: This RPC allows an application to request capabilities from a wallet (e.g. batch transactions, paymaster communication).

## Usage

### wallet_getCapabilities Example

The `wallet_getCapabilities` method is used to request information about the capabilities supported by a wallet. In accordance with EIP-5792, here’s how it should be implemented:

### Request
```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "wallet_getCapabilities",
  "params": []
}
```

### Response
The wallet should return a response compliant with EIP-5792, where capabilities are organized by chain ID:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "0x2105": {
      "atomic": {
        "status": "supported"
      }
    },
    "0x14A34": {
      "atomic": {
        "status": "unsupported"
      }
    }
  }
}
```

## Capabilities in CAIP-25 Connection Requests

CAIP-25 defines how capabilities can be expressed in wallet-to-dapp connections. These capabilities control how methods like `wallet_sendCalls` behave.

### Session Properties

In a connection request, dApps can request capabilities through `sessionProperties`. These capabilities can be universal (applying to all chains) or chain-specific:

```json
"sessionProperties": {
  "expiry": "2022-12-24T17:07:31+00:00",
  // Universal capabilities (across all chains)
  "caip154": {
    "supported": "true"
  },
  "flow-control": {
    "loose": [], 
    "strict": [],
    "exoticThirdThing": [] // Unrecognized config will be dropped by wallet
  },
  "atomic": {
    "status": "supported"
  }
}
```

### Scoped Properties

For chain-specific capabilities, dapps use `scopedProperties`:

```json
"scopedProperties": {
  // Chain-specific requests
  "eip155:8453": {
    "paymasterService": {
      "supported": true
    },
    "sessionKeys": {
      "supported": true
    }
  },
  "eip155:84532": {
    "auxiliaryFunds": {
      "supported": true
    }
  }
}
```

### Wallet Response

The wallet’s response should specify the capabilities it supports, in accordance with EIP-5792 and CAIP-25:

```json
"sessionProperties": {
  "expiry": "2022-12-24T17:07:31+00:00",
  "caip154": {
    "supported": "true"
  },
  "flow-control": {
    "loose": ["halt", "continue"],
    "strict": ["continue"]
  },
  "atomic": {
    "status": "ready"
  }
},
"scopedProperties": {
  "eip155:1": {
    // Capabilities shared across all addresses in this namespace
    "atomic": {
      "status": "supported"
    }
  },
  "eip155:137": {
    "atomic": {
      "status": "unsupported"
    }
  },
  "eip155:84532": {
    // Address-specific capabilities can include exceptions to scope-wide capabilities
    "eip155:83532:0x0910e12C68d02B561a34569E1367c9AAb42bd810": {
      "auxiliaryFunds": {
        "supported": false
      },
      "atomic": {
        "status": "supported"
      }
    }
    // No need to declare implicit/default capabilities per-address
  }
}
```

### Atomic Capability

According to EIP-5792, the `atomic` capability specifies how the wallet will execute batches of transactions. It has three possible values:

- `supported` - The wallet will execute calls atomically and contiguously
- `ready` - The wallet can upgrade to support atomic execution pending user approval
- `unsupported` - The wallet provides no atomicity guarantees

This capability is expressed per chain and is crucial for determining how `wallet_sendCalls` with `atomicRequired: true` will be handled.

## References
- EIP-5792: https://eips.ethereum.org/EIPS/eip-5792#atomicbatch-capability
- CAIP-25 namespaces: https://github.com/ChainAgnostic/namespaces/blob/main/eip155/caip25.md